/*
Header

This module is used to let a user navigate to the main sections of a site. It consists of top main and footer navigation.

Styleguide 3.1
*/

// FOUC (Flash of unstyled content)
.no-js .site-nav {
  opacity: 0;
}

.no-scroll {
	overflow: hidden;
}

#skip-navigation {
  top: 1em;
  left: 1em;
  position: fixed !important;
  z-index: 1000;
}

.site-nav {
  opacity: 1;
  transition: opacity 0.15s ease-in;

  .home-link {
		margin: 0;
	}
}

.close-button {
  background: transparent;
  border-top: 1px solid $color-darkest;
  transform: rotate(45deg);
  width: 24px;
  right: 24px;
  top: 16px;
  &:before {
    border-bottom: 1px solid $color-darkest;
    content: '';
    display: block;
    transform: rotate(95deg);
    position: relative;
    top: -1px;
  }

  span {
    background: transparent;
    color: transparent;
  }
}

// Small and medium top bar
.site-nav-title-bar {
  background: transparent;
  border-bottom: thin solid $color-grey-light-15;
  padding-top: $base-spacing;
  padding-bottom: $base-spacing;
  .title-bar-title {
    img {
      height: 24px;
    }
  }
  .title-bar-left {
    .menu-icon.dark::after {
      height: 1px;
      background: $color-grey-dark-80;
      box-shadow: 0 7px 0 $color-grey-dark-80, 0 14px 0 $color-grey-dark-80;

    }
  }
  .title-bar-right {
    font-size: $font-size-mini;

    .menu {
      justify-content: flex-end;
    }
  }
}
.title-bar-signin {
  background: transparent;
  a, a:focus, a:hover, .dropdown.menu .is-active > a {
    color: $color-grey-dark-60;
  }

  .submenu {
    width: 100%;
    text-align: left;
    padding: 8px 16px;
    border: 1px solid $color-grey-light-30;

    li {
      border-bottom: 1px solid $color-grey-light-15;
      &:last-child {
        border-bottom: 1px solid transparent;
      }

      a {
        color: $color-grey-dark-60;
        margin: $base-spacing 0;
        padding: $base-spacing;
        border-left: 2px solid transparent;

        &:hover {
          text-decoration: none;
        }
      }
    }
  }
}

// Small and medium off canvas menu
.off-canvas {
  background: $color-lightest;
}

// main nav
.site-nav-bar {
  background: transparent;
  padding: 0;
  flex-wrap: wrap;

  @include respond-to(large) {
    border-bottom: 1px solid $color-grey;
    padding-top: $base-spacing;
    padding-bottom: $base-spacing;
  }

  .menu {
    background-color: transparent;
    padding: 0;
    @include respond-to(large) {
      margin-left: $base-spacing;
    }

    li {
      border-bottom: 1px solid $color-grey-light-15;
      @include respond-to(large) {
        border-bottom: 1px solid transparent;
      }

      a {
        color: $color-grey-dark-60;
        margin: $base-spacing 0;
        padding: $base-spacing;
        border-left: 2px solid transparent;
        transform: translate3d(-$base-spacing, 0px, 0px);

        @include respond-to(large) {
          margin: 0 $base-spacing*2;
          padding: $base-spacing 0;
          border-bottom: 2px solid transparent;
          transform: translate3d(0px, 0px, 0px);
        }
        &:hover, &:focus, &.is-active {
          border-left: 2px solid $color-grey;
          text-decoration: none;
          color: $color-grey-dark-80;
          @include respond-to(large) {
            border-left: 2px solid transparent;
            border-bottom: 2px solid $color-darkest;
          }
        }
        &::after {
          border-color: $color-grey-dark-80;
        }
      }
    }
  }
  .submenu {
    background: $color-lightest;

    li {
      border-top: 1px solid $color-grey-light-15;
      border-bottom: 1px solid transparent;
      @include respond-to(large) {
        border-top: 1px solid transparent;
      }

      a {
        border-left: 2px solid transparent;
        @include respond-to(large) {
            padding: 0 $base-spacing;
            margin: $base-spacing $base-spacing*2;
          }
        &:hover, &:focus, &.is-active {
          border-left: 2px solid transparent;
          @include respond-to(large) {
            border-left:  2px solid $color-grey;
            border-bottom: 2px solid transparent;
          }
        }
      }
    }
  }
  .accordion-menu .nested.is-accordion-submenu {
    margin-left: 0;
  }
  .site-nav-main {
    flex: 0 0 100%;

    @include respond-to(large) {
      flex: 1 1 auto;
    }
  }
  .site-nav-aux {
    flex: 0 0 100%;
    margin-left: 0;

    @include respond-to(large) {
      flex: 0 1 auto;
      margin-left: auto;
    }

    li:first-child {
      display: none;
      @include respond-to(large) {
        display: list-item;
      }
    }
    .dropdown-pane {
      visibility: visible;
      display: block;
      position: static;
      padding: 0;
      border: none;
      width: auto;
      @include respond-to(large) {
        visibility: hidden;
        display: none;
        position: absolute;
        right: 0;
        padding: $base-spacing;
        border: 1px solid;
        width: 375px;

        &.is-open {
          visibility: visible;
          display: block;
        }
      }
    }
  }
}

// Dropdown arrows
.dropdown.menu.large-horizontal > li.is-dropdown-submenu-parent > a::after,
.accordion-menu .is-accordion-submenu-parent:not(.has-submenu-toggle) > a::after,
.dropdown.menu > li.is-dropdown-submenu-parent > a::after {
  border-color: $color-grey-dark-80 transparent transparent;
  border: solid;
  border-width: 0 1px 1px 0;
  padding: 4px;
  transition: all 0.3s;
  transform: rotate(45deg) translate3d(-3px, 0px, 0px);
}
.accordion-menu .is-accordion-submenu-parent[aria-expanded='true'] > a::after {
  transform: rotate(225deg) translate3d(3px, 0px, 0px);
}

// Search
.search-nav-wrapper {
  position: relative;
  .show-for-large {
    margin: 0 $base-spacing*2;
    padding: $base-spacing 0;
  }
  .dropdown-pane {
    @include respond-to(large) {
      top: 31px !important;
      left: -320px !important;
      // TODO: There needs to be a better way to control this
    }
  }
}
.site-search {
  border: 1px solid rgba(40,40,40,0.1);
  background-color: rgba(40,40,40,0.05);
  display: flex;

  input {
    background: transparent;
    border-color: transparent;
    margin: 0;
    max-width: 100%;
    box-shadow: none;
    @include respond-to(large) {
      max-width: 375px;
    }
    &:focus {
      background: $color-lightest;
    }
  }
  button {
    background: $color-darkest;
    padding: $base-spacing/2 $base-spacing;
    border: 1px solid rgba(40,40,40,0.1);
  }
}