!function(){"use strict";var t=function(){return window.location.pathname.indexOf("/fr/")!==-1?"fr":"en"}(),e=function(){return window.outerWidth}(),a=new EventEmitter,n=function(){function t(){a(),$(".more-section-menuitem").on("click",event,n),$(".more-section-menu-mobile-title").on("click",l),$(".close-button").on("click",c),$(".js-open-socialdrawer").on("click",d)}function a(){$(window).resize(function(){e<640?($(".tertiary-cta-more").removeClass("animate"),"flex"===$(".more-section-menu").css("display")&&$(".more-section-menu").css("display","block")):"block"===$(".more-section-menu").css("display")&&$(".more-section-menu").css("display","flex")})}function n(){event.preventDefault();var t=$(this),e=t.offset(),a=t.width(),n=e.left+a/2-50,c=t.attr("class").match(/[\w-]*category[\w-]*/g),l=t.text();o(c),i(l),s(n),r()}function o(t){$(".more-section-menu-dropdown-category-wrapper").fadeIn("slow").focus().filter(":not(."+t+")").hide(),$(".more-section-menu-dropdown").addClass("active")}function i(t){$("p.more-section-tagline-tag").fadeOut(),$("h1.more-section-tagline-tag").removeClass("active"),setTimeout(function(){$("h1.more-section-tagline-tag").addClass("active").text(t)},200)}function s(t){$(".more-section-menu-dropdown-arrow-up").show().css({left:t})}function r(){$(".tertiary-cta-more").removeClass("animate"),setTimeout(function(){$(".tertiary-cta-more").addClass("animate")},100)}function c(){$(".more-section-menu-dropdown-category-wrapper").hide(),$(".more-section-menu-dropdown-arrow-up").hide(),$(".tertiary-cta-more").removeClass("animate"),$("h1.more-section-tagline-tag").removeClass("active"),$("p.more-section-tagline-tag").fadeIn("slow"),$(".more-section-menu-dropdown").removeClass("active")}function l(){$(".more-section-menu").toggleClass("active"),$(this).toggleClass("active")}function d(){var t=$(this).next();t.hasClass("js-socialdrawer-opened")?t.removeClass("js-socialdrawer-opened"):t.addClass("js-socialdrawer-opened")}return{init:t}}(),o=function(){function t(){l=$(".ig-form"),c=l.find("form"),s=l.find("form").data("endpoint"),r=l.find("form").data("cancel"),e(),i()}function e(){var t=$(":input, textarea");t.change(function(t){$(this).addClass("dirty")}),$.validator.setDefaults({debug:!0,success:"valid"}),$.validator.addMethod("cdnPostal",function(t,e){return this.optional(e)||t.match(/[a-zA-Z][0-9][a-zA-Z](-| |)[0-9][a-zA-Z][0-9]/)},"Please specify a valid postal code."),c.validate({submitHandler:function(){a()},errorPlacement:function(t,e){$(e).closest(".row").find(".custom-error-location").length?$(e).closest(".row").find(".custom-error-location").append(t):$(e).parent().append(t)},rules:{phone:{required:!0,phoneUS:!0},phone2:{required:!0,phoneUS:!0},postal_code:{required:!0,cdnPostal:!0},firstname:{required:!0,maxlength:100},lastname:{required:!0,maxlength:100},email:{required:!0,maxlength:100},email2:{required:!0,maxlength:100}}}),c.find("button.cancel").on("click",function(){window.location.replace(r)})}function a(t){var e,a;return c.valid()&&(c.removeClass("server-error"),l.addClass("submitting"),e=c.serializeArray(),a=n(e),o(a)),!1}function n(t){return t}function o(t){$.ajax({method:"POST",url:s,data:t}).success(function(t){l.addClass("success"),l.removeClass("submitting")}).error(function(t){c.addClass("server-error"),l.removeClass("submitting"),ScrollMan.to($("#server-error"))})}function i(){$(".toggler").on("click",function(){$(".toggle-content").hide(),$("."+$(this).data("content")).show()})}var s,r,c,l;return{init:t}}(),i=function(){function t(){console.log("Carousel Initialized!"),$("[data-responsive-toggle] button").on("click",function(){$("body").toggleClass("site-header-is-active")}),e()}function e(){var t,e,a;$(".ig-carousel").each(function(n){a=$(this),t=a.data("prevArrowText")?'<button type="button" class="slick-prev"><span class="show-for-sr">'+a.data("prevArrowText")+"</span></button>":'<button type="button" class="slick-prev"><span class="show-for-sr">Previous</span></button>',e=a.data("nextArrowText")?'<button type="button" class="slick-next"><span class="show-for-sr">'+a.data("nextArrowText")+"</span></button>":'<button type="button" class="slick-next"><span class="show-for-sr">Next</span></button>',a.slick({adaptiveHeight:a.data("adaptiveHeight")||!1,arrows:a.data("arrows")||!1,autoPlay:a.data("autoPlay")||!1,dots:a.data("dots")||!1,fade:a.data("fade")||!1,infinite:a.data("infinite")||!1,mobileFirst:!0,nextArrow:e,prevArrow:t,responsive:a.data("responsive")||"",slide:a.data("slide")||"",slidesToScroll:a.data("slideToScroll")||1,slidesToShow:a.data("slidesToShow")||1,speed:a.data("speed")||300})})}return{init:t}}(),s=function(){function t(){u=e(),l=$(".ig-shuffled-carousel").data("articles").articles,f=$(".ig-shuffled-carousel").data("name"),p=$(".ig-shuffled-carousel").data("limit"),d=u[f]?u[f]:{},r(i())}function e(){return"undefined"!=typeof Storage?localStorage.getItem("ig")?JSON.parse(localStorage.getItem("ig")):a():void console.warn("localstorage is not available!")}function a(){return localStorage.setItem("ig",JSON.stringify({})),JSON.parse(localStorage.getItem("ig"))}function n(t){var e=Object.assign({},d);t.forEach(function(t,a){a<=1&&Object.keys(t).map(function(a){e[a]=t[a]})}),u[f]=e,localStorage.setItem("ig",JSON.stringify(u))}function o(){delete u[f],localStorage.setItem("ig",JSON.stringify(u))}function i(){var e,a=[];return Object.keys(l).forEach(function(t,e){var n={};n[t]=l[t],d[t]||a.push(n)}),e=a.splice(0,p),e.length<p?(d={},o(),t()):s(e)}function s(t){for(var e,a,n=t.length;0!==n;)a=Math.floor(Math.random()*n),n-=1,e=t[n],t[n]=t[a],t[a]=e;return t}function r(t){var e,a=[];t&&(t.forEach(function(t){Object.keys(t).map(function(e){a.push(t[e])})}),e=Mustache.to_html($("#"+f).html(),{articles:a}),$(".ig-shuffled-carousel").html(e),n(t),c())}function c(){var t,e,a;$(".ig-carousel").not(".slick-initialized").each(function(n){a=$(this),t=a.data("prevArrowText")?'<button type="button" class="slick-prev"><span class="show-for-sr">'+a.data("prevArrowText")+"</span></button>":'<button type="button" class="slick-prev"><span class="show-for-sr">Previous</span></button>',e=a.data("nextArrowText")?'<button type="button" class="slick-next"><span class="show-for-sr">'+a.data("nextArrowText")+"</span></button>":'<button type="button" class="slick-next"><span class="show-for-sr">Next</span></button>',a.slick({adaptiveHeight:a.data("adaptiveHeight")||!1,arrows:a.data("arrows")||!1,autoPlay:a.data("autoPlay")||!1,dots:a.data("dots")||!1,fade:a.data("fade")||!1,infinite:a.data("infinite")||!1,mobileFirst:!0,nextArrow:e,prevArrow:t,responsive:a.data("responsive")||"",slide:a.data("slide")||"",slidesToScroll:a.data("slideToScroll")||1,slidesToShow:a.data("slidesToShow")||1,speed:a.data("speed")||300})})}var l,d,u,f,p;return{init:t}}(),r=function(){function t(){e()}function e(){var t,e,i={},s=["auto","metadata","none"];$(".ig-video-group").each(function(){t=$(this),i.account=t.data("account"),i.player=t.data("player"),a(i),t.find(".ig-video-js").each(function(t){e=$(this),i.id=e.data("id"),i.title=e.data("title")?e.data("title"):"",i.description=e.data("description")?e.data("description"):"",i.auto=e.data("autoplay")?"autoplay":"",i.ctrl=e.data("controls")?"controls":"",i.preload=s.indexOf(e.data("preload"))>-1?e.data("preload"):"auto",i.transcript=e.data("transcript")?e.data("transcript"):"",o.push(i.id),n(e,i,t)})})}function a(t){var e='<script src="//players.brightcove.net/'+t.account+"/"+t.player+'_default/index.min.js"></script>';$("body").append(e)}function n(t,e,a){var n='<div class="video-container"><span class="video-overlay '+e.id+'"></span><div class="video-container-responsive"><video data-setup=\'{"techOrder": ["html5"]}\' data-video-id="'+e.id+'" preload="'+e.preload+'" data-account="'+e.account+'" data-player="'+e.player+'" data-embed="default" data-application-id="'+a+'" class="video-js" id="'+e.id+'" '+e.ctrl+" "+e.auto+"></video></div>";e.transcript.length>0&&(n+='<div class="video-transcript"><a target="_blank" href="'+e.transcript+'">Transcript</a></div>'),n+='</div><h2 class="video-title">'+e.title+'</h2><p class="video-description">'+e.description+"</p>",t.replaceWith(n)}var o=[];return{init:t}}(),c=function(){function t(t){var a=$(t);n=["Hello!","Is it me you're looking for?","I can see it in your eyes","I can see it in your smile","You're all I've ever wanted","And my arms are open wide","'cause you know just what to say","And you know just what to do","And I want to tell you so much"],a.find("a.button.message").on("click",event,e)}function e(){a.emit("hello",n[o]),o+=1}var n=[],o=0;return{init:t}}(),l=function(){function t(t){n=$(t),e()}function e(){a.on("hello",function(t){$('<p class="alert-box alert">'+t+"</p>").hide().appendTo(n).fadeIn("fast")})}var n;return{init:t}}(),d=function(){function e(){$(document).foundation(),$(".ig-form").length&&o.init(),$(".more-section").length&&n.init(),$(".ig-carousel").length&&i.init(),$(".ig-shuffled-carousel").length&&s.init(),$(".ig-video-group").length&&r.init(),$(".ig-evt1").length&&c.init(".ig-evt1"),$(".ig-evt2").length&&l.init(".ig-evt2"),a()}function a(){$("body").addClass(t)}return{init:e}}();$(document).ready(function(){d.init()})}();