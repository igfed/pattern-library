!function(){"use strict";var t=function(){return window.location.pathname.indexOf("/fr.")!==-1||window.location.pathname.indexOf("/fr/")!==-1?"fr":"en"}(),e=new EventEmitter,a=function(t,e,a){var n;return function(){var o=this,i=arguments,r=function(){n=null,a||t.apply(o,i)},s=a&&!n;clearTimeout(n),n=setTimeout(r,e),s&&t.apply(o,i)}},n=function(){function t(t){a.click(function(t){e.addClass("no-scroll")}),n.click(function(t){e.removeClass("no-scroll")})}var e=$("body"),a=$(".menu-icon"),n=$(".close-button-circle");return{init:t}}(),o=function(){function t(){e(),$(".more-section-menuitem").on("click",a(n,500,!0)),$(".more-section-menu-mobile-title").on("click",l),$(".close-button").on("click",c),$(".js-open-socialdrawer").on("click",d)}function e(){$(window).resize(function(){$(window).width()<=375?($(".tertiary-cta-more").removeClass("animate"),"flex"===$(".more-section-menu").css("display")&&$(".more-section-menu").css("display","block")):"block"===$(".more-section-menu").css("display")&&$(".more-section-menu").css("display","flex")})}function n(t){if(window.matchMedia("(min-width: 640px)").matches){try{t.returnValue=!1}catch(e){console.warn("event.returnValue not available")}t.preventDefault()}var a=$(this),n=a.offset(),c=a.width(),l=n.left+c/2-50,d=a.attr("class").match(/[\w-]*category[\w-]*/g),u=a.text();o(d),i(u),r(l),s()}function o(t){$(".more-section-menu-dropdown-category-wrapper").hide(),$("."+t[0]).fadeIn("slow").focus(),$(".more-section-menu-dropdown").addClass("active")}function i(t){$("p.more-section-tagline-tag").fadeOut(),$("h1.more-section-tagline-tag").removeClass("active"),setTimeout(function(){$("h1.more-section-tagline-tag").addClass("active").text(t)},200)}function r(t){$(".more-section-menu-dropdown-arrow-up").show().css({left:t})}function s(){$(".tertiary-cta-more").removeClass("animate"),setTimeout(function(){$(".tertiary-cta-more").addClass("animate")},100)}function c(){$(".more-section-menu-dropdown-category-wrapper").hide(),$(".more-section-menu-dropdown-arrow-up").hide(),$(".tertiary-cta-more").removeClass("animate"),$("h1.more-section-tagline-tag").removeClass("active"),$("p.more-section-tagline-tag").fadeIn("slow"),$(".more-section-menu-dropdown").removeClass("active")}function l(){$(".more-section-menu").toggleClass("active"),$(this).toggleClass("active")}function d(){var t=$(this).next();t.hasClass("js-socialdrawer-opened")?t.removeClass("js-socialdrawer-opened"):t.addClass("js-socialdrawer-opened")}return{init:t}}(),i=function(){function t(){l=$(".ig-form"),c=l.find("form"),r=l.find("form").data("endpoint"),s=l.find("form").data("cancel"),e(),i()}function e(){var t=$(":input, textarea");t.change(function(t){$(this).addClass("dirty")}),$.validator.setDefaults({debug:!0,success:"valid"}),$.validator.addMethod("cdnPostal",function(t,e){return this.optional(e)||t.match(/[a-zA-Z][0-9][a-zA-Z](-| |)[0-9][a-zA-Z][0-9]/)},"Please specify a valid postal code."),c.validate({submitHandler:function(){a()},errorPlacement:function(t,e){$(e).closest(".row").find(".custom-error-location").length?$(e).closest(".row").find(".custom-error-location").append(t):$(e).parent().append(t)},rules:{phone:{required:!0,phoneUS:!0},phone2:{required:!0,phoneUS:!0},postal_code:{required:!0,cdnPostal:!0},firstname:{required:!0,maxlength:100},lastname:{required:!0,maxlength:100},email:{required:!0,maxlength:100},email2:{required:!0,maxlength:100}}}),c.find("button.cancel").on("click",function(){window.location.replace(s)})}function a(t){var e,a;return c.valid()&&(c.removeClass("server-error"),l.addClass("submitting"),e=c.serializeArray(),a=n(e),o(a)),!1}function n(t){return t}function o(t){$.ajax({method:"POST",url:r,data:t}).success(function(t){l.addClass("success"),l.removeClass("submitting")}).error(function(t){c.addClass("server-error"),l.removeClass("submitting"),ScrollMan.to($("#server-error"))})}function i(){$(".toggler").on("click",function(){$(".toggle-content").hide(),$("."+$(this).data("content")).show()})}var r,s,c,l;return{init:t}}(),r=function(){function t(){console.log("Carousel Initialized!"),e()}function e(){var t,e,a;$(".ig-carousel").each(function(n){a=$(this),t=a.data("prevArrowText")?'<button type="button" class="slick-prev"><span class="show-for-sr">'+a.data("prevArrowText")+"</span></button>":'<button type="button" class="slick-prev"><span class="show-for-sr">Previous</span></button>',e=a.data("nextArrowText")?'<button type="button" class="slick-next"><span class="show-for-sr">'+a.data("nextArrowText")+"</span></button>":'<button type="button" class="slick-next"><span class="show-for-sr">Next</span></button>',a.slick({adaptiveHeight:a.data("adaptiveHeight")||!1,arrows:a.data("arrows")||!1,autoPlay:a.data("autoPlay")||!1,dots:a.data("dots")||!1,fade:a.data("fade")||!1,infinite:a.data("infinite")||!1,mobileFirst:!0,nextArrow:e,prevArrow:t,responsive:a.data("responsive")||"",slide:a.data("slide")||"",slidesToScroll:a.data("slideToScroll")||1,slidesToShow:a.data("slidesToShow")||1,speed:a.data("speed")||300})})}return{init:t}}(),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},c=function(){function t(){f=e(),d=$(".ig-shuffled-carousel").data("articles").articles,p=$(".ig-shuffled-carousel").data("name"),v=$(".ig-shuffled-carousel").data("limit"),u=f[p]?f[p]:{},c(i())}function e(){return"undefined"!=typeof Storage?localStorage.getItem("ig")?JSON.parse(localStorage.getItem("ig")):a():void console.warn("localstorage is not available!")}function a(){return localStorage.setItem("ig",JSON.stringify({})),JSON.parse(localStorage.getItem("ig"))}function n(t){var e=s({},u);t.forEach(function(t,a){a<=1&&Object.keys(t).map(function(a){e[a]=t[a]})}),f[p]=e,localStorage.setItem("ig",JSON.stringify(f))}function o(){delete f[p],localStorage.setItem("ig",JSON.stringify(f))}function i(){var e,a=[];return Object.keys(d).forEach(function(t,e){var n={};n[t]=d[t],u[t]||a.push(n)}),e=a.splice(0,v),e.length<v?(u={},o(),t()):r(e)}function r(t){for(var e,a,n=t.length;0!==n;)a=Math.floor(Math.random()*n),n-=1,e=t[n],t[n]=t[a],t[a]=e;return t}function c(t){var e,a=[];t&&(t.forEach(function(t){Object.keys(t).map(function(e){a.push(t[e])})}),e=Mustache.to_html($("#"+p).html(),{articles:a}),$(".ig-shuffled-carousel").html(e),n(t),l())}function l(){var t,e,a;$(".ig-carousel").not(".slick-initialized").each(function(n){a=$(this),t=a.data("prevArrowText")?'<button type="button" class="slick-prev"><span class="show-for-sr">'+a.data("prevArrowText")+"</span></button>":'<button type="button" class="slick-prev"><span class="show-for-sr">Previous</span></button>',e=a.data("nextArrowText")?'<button type="button" class="slick-next"><span class="show-for-sr">'+a.data("nextArrowText")+"</span></button>":'<button type="button" class="slick-next"><span class="show-for-sr">Next</span></button>',a.slick({adaptiveHeight:a.data("adaptiveHeight")||!1,arrows:a.data("arrows")||!1,autoPlay:a.data("autoPlay")||!1,dots:a.data("dots")||!1,fade:a.data("fade")||!1,infinite:a.data("infinite")||!1,mobileFirst:!0,nextArrow:e,prevArrow:t,responsive:a.data("responsive")||"",slide:a.data("slide")||"",slidesToScroll:a.data("slideToScroll")||1,slidesToShow:a.data("slidesToShow")||1,speed:a.data("speed")||300})})}var d,u,f,p,v;return{init:t}}(),l=function(){function e(){a(),c=setInterval(function(){$(".vjs-plugins-ready").length&&(i(),clearInterval(c))},500),s()}function a(){var t,e,a={},i=["auto","metadata","none"];$(".ig-video-group").each(function(){t=$(this),a.account=t.data("account"),a.player=t.data("player"),n(a),t.find(".ig-video-js").each(function(t){e=$(this),a.id=e.data("id"),a.overlay=e.data("overlay")?e.data("overlay"):"",a.title=e.data("title")?e.data("title"):"",a.description=e.data("description")?e.data("description"):"",a.auto=e.data("autoplay")?"autoplay":"",a.ctrl=e.data("controls")?"controls":"",a.preload=i.indexOf(e.data("preload"))>-1?e.data("preload"):"auto",a.transcript=e.data("transcript")?e.data("transcript"):"",l.push(a.id),o(e,a,t)})})}function n(t){var e='<script src="//players.brightcove.net/'+t.account+"/"+t.player+'_default/index.min.js"></script>';$("body").append(e)}function o(e,a,n){var o={en:"Transcript",fr:"Transcription"},i='<div class="video-container"><div class="video-container-responsive">';a.overlay.length>0&&(i+='<span class="video-overlay '+a.id+'" style="background-image: url(\'../'+a.overlay+"');\"></span>"),i+='<video data-setup=\'{"techOrder": ["html5"]}\' data-video-id="'+a.id+'" preload="'+a.preload+'" data-account="'+a.account+'" data-player="'+a.player+'" data-embed="default" data-application-id="'+n+'" class="video-js" id="'+a.id+'" '+a.ctrl+" "+a.auto+"></video></div>",a.transcript.length>0&&(i+='<div class="video-transcript"><a target="_blank" href="'+a.transcript+'">'+o[t]+"</a></div>"),i+='</div><h2 class="video-title">'+a.title+'</h2><p class="video-description">'+a.description+"</p>",e=e.replaceWith(i),a.overlay&&$(document).on("click","#"+a.id,function(){$(this).siblings(".video-overlay").hide()})}function i(){var t;l.forEach(function(e){videojs("#"+e).ready(function(){t=this,t.on("play",r),d.push(t)})})}function r(t){var e=t.target.id;d.forEach(function(t){t.id()!==e&&videojs(t.id()).pause()})}function s(){$(window).scroll(function(){d.forEach(function(t){$("#"+t.id()).visible()||videojs(t.id()).pause()})})}var c,l=[],d=[];return{init:e}}(),d=function(){function t(t){var e=$(t);n=["Hello!","Is it me you're looking for?","I can see it in your eyes","I can see it in your smile","You're all I've ever wanted","And my arms are open wide","'cause you know just what to say","And you know just what to do","And I want to tell you so much"],e.find("a.button.message").on("click",event,a)}function a(){e.emit("hello",n[o]),o+=1}var n=[],o=0;return{init:t}}(),u=function(){function t(t){n=$(t),a()}function a(){e.on("hello",function(t){$('<p class="alert-box alert">'+t+"</p>").hide().appendTo(n).fadeIn("fast")})}var n;return{init:t}}(),f=function(){function e(){$(document).foundation(),$("#main-navigation").length&&n.init(),$(".ig-form").length&&i.init(),$(".more-section").length&&o.init(),$(".ig-carousel").length&&r.init(),$(".ig-shuffled-carousel").length&&c.init(),$(".ig-video-group").length&&l.init(),$(".ig-evt1").length&&d.init(".ig-evt1"),$(".ig-evt2").length&&u.init(".ig-evt2"),a()}function a(){$("body").addClass(t)}return{init:e}}();$(document).ready(function(){f.init()})}();